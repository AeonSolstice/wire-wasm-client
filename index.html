<!doctype html><meta content="width=device-width,initial-scale=1" name=viewport><title>wire</title><style>:root{--border-radius:10px}*{box-sizing:border-box;color:#fff;font-family:Arial,Helvetica,sans-serif;margin:0;user-select:none;-webkit-user-drag:none}:focus{outline:none}button{border:none;&:not(:disabled):not(.selected){cursor:pointer}}.center{left:50%;top:50%;translate:-50% -50%}#main-menu,body,html{height:100%;width:100%}body{background-color:#191919}#canvas{display:none;position:absolute;top:0}#main-menu>*{float:left}#title{font-size:50px;font-weight:700;height:60px;left:50%;line-height:60px;position:absolute;text-align:center;translate:-50% 0}#header{height:30px;width:100%}#main{height:calc(100% - 60px);width:100%}#connection-status{bottom:0;font-size:20px;height:30px;left:50%;line-height:30px;padding:0 5px;position:absolute;text-align:center;translate:-50% 0;width:200px}#controls{background-color:#424242;border-radius:var(--border-radius);height:auto;padding:20px;position:relative;width:fit-content}#gun-select-container{height:100px;margin-bottom:20px}.btn-gun-select{background-color:#eee;border-radius:var(--border-radius);float:left;height:100%;padding:0;transition:rotate .5s,filter .5s,scale .5s,background-color .5s;width:100px;&:not(:last-child){margin-right:10px}&.selected{background-color:#4caf50;rotate:-90deg;>img{filter:invert(1)}}&:not(:disabled):not(.selected){background-color:#9e9e9e;&:focus{border:2px solid #fff;rotate:-90deg;scale:1.1;>img{margin:-12px}}&:hover{background-color:#bdbdbd;rotate:-90deg;scale:1.1}&:active{background-color:#757575}}>img{margin:-10px;transition:inherit;width:120px}&:disabled>img{filter:opacity(50%)}}#btn-spawn{background-color:#80cbc4;border-radius:var(--border-radius);font-size:24px;height:40px;left:50%;position:relative;translate:-50%;width:200px;&:not(:disabled){background-color:#009688;&:focus{border:2px solid #fff}&:hover{background-color:#26a69a}&:active{background-color:#00897b}}}#footer{height:30px;width:100%}#discord-link{float:left}#discord-link,#version{background-color:#424242;font-size:18px;height:100%;line-height:30px;padding:0 5px;text-decoration:none}#version{float:right}</style><canvas id=canvas></canvas><p id=connection-status>Loading<div id=main-menu><p id=title>wire<div id=header></div><div id=main><div id=controls class=center><div id=gun-select-container><button class="btn-gun-select selected" data-gun=0 tabindex=-1><img alt=Pistol src=img/icons/pistol.png title=Pistol></button> <button class=btn-gun-select data-gun=1><img alt=SMG src=img/icons/smg.png title=SMG></button> <button class=btn-gun-select data-gun=2><img alt=Shotgun src=img/icons/shotgun.png title=Shotgun></button> <button class=btn-gun-select data-gun=3><img alt=Assault src=img/icons/assault.png title=Assault></button> <button class=btn-gun-select data-gun=4><img alt=Sniper src=img/icons/sniper.png title=Sniper></button> <button class=btn-gun-select data-gun=5><img alt=LMG src=img/icons/lmg.png title=LMG></button></div><button disabled id=btn-spawn>Spawn</button></div></div><div id=footer><a href=https://discord.gg/sabhyHueQf id=discord-link>Discord</a> <a href=changelog.txt id=version title=dev@55e6c8>0.0.2</a></div></div><script type=module>var a=Object.defineProperty,b=(a,b=document)=>"string"==typeof a?b.querySelector(a):a,c=(a,b=document)=>"string"==typeof a?b.querySelectorAll(a):a,d=(a,c,d)=>b(a).addEventListener(d?c:c.name,d||c),e=(a,c="block")=>b(a).style.display=c,f=a=>b(a).style.display="none",g={};((b,c)=>{for(var d in c)a(b,d,{get:c[d],enumerable:1})})(g,{arc:()=>G,beginPath:()=>q,clearRect:()=>A,closePath:()=>r,create:()=>m,destroy:()=>n,fill:()=>t,fillRect:()=>C,fillStyle:()=>v,fillText:()=>K,font:()=>H,globalAlpha:()=>x,lineTo:()=>D,lineWidth:()=>w,moveTo:()=>E,rect:()=>F,restore:()=>p,save:()=>o,scale:()=>z,h:()=>l,stroke:()=>s,strokeRect:()=>B,strokeStyle:()=>u,textAlign:()=>I,textBaseline:()=>J,translate:()=>y});var h,i=new Map,j=new TextDecoder,k=0;function l(a){h=new Uint8Array(a.buffer)}function m(a){const b=document.getElementsByTagName("canvas")[a];return b?(k++,i.set(k,b.getContext("2d")),k):0}function n(a){i.delete(a)}function o(a){i.get(a).save()}function p(a){i.get(a).restore()}function q(a){i.get(a).beginPath()}function r(a){i.get(a).closePath()}function s(a){i.get(a).stroke()}function t(a){i.get(a).fill()}function u(a,b,c){i.get(a).strokeStyle=j.decode(h.subarray(b,b+c))}function v(a,b,c){i.get(a).fillStyle=j.decode(h.subarray(b,b+c))}function w(a,b){i.get(a).lineWidth=b}function x(a,b){i.get(a).globalAlpha=b}function y(a,b,c){i.get(a).translate(b,c)}function z(a,b,c){i.get(a).scale(b,c)}function A(a,b,c,d,e){i.get(a).clearRect(b,c,d,e)}function B(a,b,c,d,e){i.get(a).strokeRect(b,c,d,e)}function C(a,b,c,d,e){i.get(a).fillRect(b,c,d,e)}function D(a,b,c){i.get(a).lineTo(b,c)}function E(a,b,c){i.get(a).moveTo(b,c)}function F(a,b,c,d,e){i.get(a).rect(b,c,d,e)}function G(a,b,c,d,e,f){i.get(a).arc(b,c,d,e,f)}function H(a,b,c){i.get(a).font=j.decode(h.subarray(b,b+c))}function I(a,b,c){i.get(a).textAlign=j.decode(h.subarray(b,b+c))}function J(a,b,c){i.get(a).textBaseline=j.decode(h.subarray(b,b+c))}function K(a,b,c,d,e){i.get(a).fillText(j.decode(h.subarray(b,b+c)),d,e)}var L,M=new TextEncoder,N=new WebAssembly.Memory({initial:32});function O(){L=new Uint8Array(N.buffer),N.buffer,l(N)}function P(a,b){L.set(M.encode(b),a)}var Q,R,S,T={i:{memory:N,j:O,log(a,b){},error(a,b){}},Math,k:g,l:{send(a,b){Q.send(L.subarray(a,a+b))},m(){$=1,f(X),f(Y),e(W),R=Date.now(),render()},o(){cancelAnimationFrame(S),$=0,Z.disabled=0,_()},p(){V.select_perk(0)},q(){}}},U=await WebAssembly.instantiateStreaming(fetch("g.wasm"),T),{exports:V}=U.instance,W=b("canvas"),X=b("#main-menu"),Y=b("#connection-status"),Z=(b("#controls"),b("#btn-spawn")),$=0;function _(){f(W),e(X),e(Y)}function render(){const a=Date.now(),b=(a-R)/1e3;V.render(b),R=a,S=requestAnimationFrame(render)}function onResize(){W.width=window.innerWidth,W.height=window.innerHeight,V.set_canvas_size(W.width,W.height)}d(Z,"click",(function(){Q.readyState===WebSocket.OPEN&&(Z.disabled=1,V.spawn(+b(".btn-gun-select.selected").dataset.gun))})),d(document,"keydown",(function({code:a,repeat:b}){!b&&$&&(P(V.KEY_CODE_BUF,a),V.on_keydown(a.length))})),d(document,"keyup",(function({code:a}){$&&(P(V.KEY_CODE_BUF,a),V.on_keyup(a.length))})),d(document,"mousedown",(function(){$&&V.on_mousedown()})),d(document,"mouseup",(function(){$&&V.on_mouseup()})),d(document,"mousemove",(function({clientX:a,clientY:b}){$&&V.on_mousemove(a,b)})),d(window,"resize",onResize),c(".btn-gun-select").forEach((a=>{d(a,"click",(()=>{c(".btn-gun-select").forEach((a=>{a.classList.remove("selected"),a.removeAttribute("tabIndex")})),a.classList.add("selected"),a.setAttribute("tabIndex",-1)}))})),O(),V.setup(),onResize(),(Q=new WebSocket("wss://wire-epyi.onrender.com")).binaryType="arraybuffer",d(Q,"open",(function(){Y.innerText="Connected",Y.style.backgroundColor="#4CAF50",Z.disabled=0})),d(Q,"message",(function({data:a}){"string"!=typeof a&&(L.set(new Uint8Array(a),V.MSG_BUF),V.on_message(a.byteLength))})),d(Q,"error",(function(){})),d(Q,"close",(function({code:a,reason:b}){Y.innerText="Disconnected",Y.style.backgroundColor="#F44336",Z.disabled=1,$&&($=0,_(),cancelAnimationFrame(S))})),Y.innerText="Connecting",Y.style.backgroundColor="#2196F3",e(Y);</script>