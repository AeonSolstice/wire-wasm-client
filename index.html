<!doctype html><meta content="width=device-width,initial-scale=1" name=viewport><title>wire</title><style>:root{--border-radius:10px}*{box-sizing:border-box;color:#fff;font-family:Arial,Helvetica,sans-serif;margin:0;user-select:none;-webkit-user-drag:none}:focus{outline:none}#main-menu,body,html{height:100%;width:100%}body{overflow:hidden}button{border:none;&:not(:disabled):not(.selected){cursor:pointer}}.center{left:50%;top:50%;translate:-50% -50%}#title{font-size:50px;font-weight:700;height:80px;line-height:80px;text-align:center}#main-menu,#title{background-color:#212121;width:100%}#main-menu{height:calc(100% - 80px)}#controls{background-color:#616161;border-radius:var(--border-radius);height:auto;padding:20px;position:relative;width:fit-content}#gun-select-container{height:100px;margin-bottom:20px}.btn-gun-select{background-color:#eee;border-radius:var(--border-radius);float:left;height:100%;padding:0;transition:rotate .5s,filter .5s,scale .5s,background-color .5s;width:100px;&:not(:last-child){margin-right:10px}&.selected{background-color:#4caf50;rotate:-90deg;>img{filter:invert(1)}}&:not(:disabled):not(.selected){background-color:#9e9e9e;&:focus{border:2px solid #fff;rotate:-90deg;scale:1.1;>img{margin:-12px}}&:hover{background-color:#bdbdbd;rotate:-90deg;scale:1.1}&:active{background-color:#757575}}>img{margin:-10px;transition:inherit;width:120px}&:disabled>img{filter:opacity(50%)}}#btn-spawn{background-color:#80cbc4;border-radius:var(--border-radius);font-size:24px;height:40px;left:50%;position:relative;translate:-50%;width:200px;&:not(:disabled){background-color:#009688;&:focus{border:2px solid #fff}&:hover{background-color:#26a69a}&:active{background-color:#00897b}}}#connection-status{background-color:#424242;border-radius:var(--border-radius);bottom:5px;font-size:30px;left:50%;padding:5px;position:absolute;text-align:center;translate:-50%;width:350px}#canvas{display:none;position:absolute;top:0}</style><canvas id=canvas></canvas><p id=title>wire<div id=main-menu><div id=controls class=center><div id=gun-select-container><button class="btn-gun-select selected" data-gun=0 tabindex=-1><img alt=Pistol src=img/icons/pistol.png title=Pistol></button> <button class=btn-gun-select data-gun=1><img alt=SMG src=img/icons/smg.png title=SMG></button> <button class=btn-gun-select data-gun=2><img alt=Shotgun src=img/icons/shotgun.png title=Shotgun></button> <button class=btn-gun-select data-gun=3><img alt=Assault src=img/icons/assault.png title=Assault></button> <button class=btn-gun-select data-gun=4><img alt=Sniper src=img/icons/sniper.png title=Sniper></button> <button class=btn-gun-select data-gun=5><img alt=LMG src=img/icons/lmg.png title=LMG></button></div><button disabled id=btn-spawn>Spawn</button></div><p id=connection-status>Loading</div><script type=module>var a=Object.defineProperty,b=(a,b=document)=>"string"==typeof a?b.querySelector(a):a,c=(a,b=document)=>"string"==typeof a?b.querySelectorAll(a):a,d=(a,c,d)=>b(a).addEventListener(d?c:c.name,d||c),e=(a,c="block")=>b(a).style.display=c,f=a=>b(a).style.display="none",g={};((b,c)=>{for(var d in c)a(b,d,{get:c[d],enumerable:1})})(g,{arc:()=>G,beginPath:()=>q,clearRect:()=>A,closePath:()=>r,create:()=>m,destroy:()=>n,fill:()=>t,fillRect:()=>C,fillStyle:()=>v,globalAlpha:()=>x,lineTo:()=>D,lineWidth:()=>w,moveTo:()=>E,rect:()=>F,restore:()=>p,save:()=>o,scale:()=>z,h:()=>l,stroke:()=>s,strokeRect:()=>B,strokeStyle:()=>u,translate:()=>y});var h,i=new Map,j=new TextDecoder,k=0;function l(a){h=new Uint8Array(a.buffer)}function m(a){const b=document.getElementsByTagName("canvas")[a];return b?(k++,i.set(k,b.getContext("2d")),k):0}function n(a){i.delete(a)}function o(a){i.get(a).save()}function p(a){i.get(a).restore()}function q(a){i.get(a).beginPath()}function r(a){i.get(a).closePath()}function s(a){i.get(a).stroke()}function t(a){i.get(a).fill()}function u(a,b,c){i.get(a).strokeStyle=j.decode(h.subarray(b,b+c))}function v(a,b,c){i.get(a).fillStyle=j.decode(h.subarray(b,b+c))}function w(a,b){i.get(a).lineWidth=b}function x(a,b){i.get(a).globalAlpha=b}function y(a,b,c){i.get(a).translate(b,c)}function z(a,b,c){i.get(a).scale(b,c)}function A(a,b,c,d,e){i.get(a).clearRect(b,c,d,e)}function B(a,b,c,d,e){i.get(a).strokeRect(b,c,d,e)}function C(a,b,c,d,e){i.get(a).fillRect(b,c,d,e)}function D(a,b,c){i.get(a).lineTo(b,c)}function E(a,b,c){i.get(a).moveTo(b,c)}function F(a,b,c,d,e){i.get(a).rect(b,c,d,e)}function G(a,b,c,d,e,f){i.get(a).arc(b,c,d,e,f)}var H,I=new TextEncoder,J=new WebAssembly.Memory({initial:32});function K(){H=new Uint8Array(J.buffer),J.buffer,l(J)}function L(a,b){H.set(I.encode(b),a)}var M,N,O,P={i:{memory:J,j:K,log(a,b){},error(a,b){}},Math,k:g,l:{send(a,b){M.send(H.subarray(a,a+b))},m(){X=1,f(T),f(U),e(S),N=Date.now(),Z()},o(){cancelAnimationFrame(O),X=0,W.disabled=0,Y()}}},Q=await WebAssembly.instantiateStreaming(fetch("g.wasm"),P),{exports:R}=Q.instance,S=b("canvas"),T=b("#title"),U=b("#main-menu"),V=(b("#controls"),b("#connection-status")),W=b("#btn-spawn"),X=0;function Y(){f(S),e(T),e(U)}function Z(){const a=Date.now(),b=(a-N)/1e3;R.render(b),N=a,O=requestAnimationFrame(Z)}function $(){S.width=window.innerWidth,S.height=window.innerHeight,R.set_canvas_size(S.width,S.height)}d(W,"click",(function(){M.readyState===WebSocket.OPEN&&(W.disabled=1,R.spawn(+b(".btn-gun-select.selected").dataset.gun))})),d(document,"keydown",(function({code:a,repeat:b}){!b&&X&&(L(R.KEY_CODE_BUF,a),R.on_keydown(a.length))})),d(document,"keyup",(function({code:a}){X&&(L(R.KEY_CODE_BUF,a),R.on_keyup(a.length))})),d(document,"mousedown",(function(){X&&R.on_mousedown()})),d(document,"mouseup",(function(){X&&R.on_mouseup()})),d(document,"mousemove",(function({clientX:a,clientY:b}){X&&R.on_mousemove(a,b)})),d(window,"resize",$),c(".btn-gun-select").forEach((a=>{d(a,"click",(()=>{c(".btn-gun-select").forEach((a=>{a.classList.remove("selected"),a.removeAttribute("tabIndex")})),a.classList.add("selected"),a.setAttribute("tabIndex",-1)}))})),K(),R.setup(),$(),(M=new WebSocket("wss://wire-epyi.onrender.com")).binaryType="arraybuffer",d(M,"open",(function(){V.innerText="Connected",V.style.backgroundColor="#4CAF50",W.disabled=0})),d(M,"message",(function({data:a}){"string"!=typeof a&&(H.set(new Uint8Array(a),R.MSG_BUF),R.on_message(a.byteLength))})),d(M,"error",(function(){})),d(M,"close",(function({code:a,reason:b}){V.innerText="Disconnected",V.style.backgroundColor="#F44336",W.disabled=1,X&&(X=0,Y(),cancelAnimationFrame(O))})),V.innerText="Connecting",V.style.backgroundColor="#2196F3",e(V);for(const a in R)window[a]=R[a];</script>