<!doctype html><meta content="width=device-width,initial-scale=1" name=viewport><title>wire</title><style>:root{--border-radius:10px}*{box-sizing:border-box;color:#fff;font-family:Arial,Helvetica,sans-serif;margin:0;user-select:none;-webkit-user-drag:none}:focus{outline:none}button{border:none;&:not(:disabled):not(.selected){cursor:pointer}}.center{left:50%;top:50%;translate:-50% -50%}#main-menu,body,html{height:100%;width:100%}body{background-color:#191919}#canvas{display:none;position:absolute;top:0}#main-menu>*{float:left}#title{font-size:50px;font-weight:700;height:60px;left:50%;line-height:60px;position:absolute;text-align:center;translate:-50% 0}#header{height:30px;width:100%}#main{height:calc(100% - 60px);width:100%}#connection-status{bottom:0;font-size:20px;height:30px;left:50%;line-height:30px;padding:0 5px;position:absolute;text-align:center;translate:-50% 0;width:200px}#controls{background-color:#424242;border-radius:var(--border-radius);height:auto;padding:20px;position:relative;width:fit-content}#gun-select-container{height:100px;margin-bottom:20px}.btn-gun-select{background-color:#eee;border-radius:var(--border-radius);float:left;height:100%;padding:0;transition:rotate .5s,filter .5s,scale .5s,background-color .5s;width:100px;&:not(:last-child){margin-right:10px}&.selected{background-color:#4caf50;rotate:-90deg;>img{filter:invert(1)}}&:not(:disabled):not(.selected){background-color:#9e9e9e;&:focus{border:2px solid #fff;rotate:-90deg;scale:1.1;>img{margin:-12px}}&:hover{background-color:#bdbdbd;rotate:-90deg;scale:1.1}&:active{background-color:#757575}}>img{margin:-10px;transition:inherit;width:120px}&:disabled>img{filter:opacity(50%)}}#btn-spawn{background-color:#80cbc4;border-radius:var(--border-radius);font-size:24px;height:40px;left:50%;position:relative;translate:-50%;width:200px;&:not(:disabled){background-color:#009688;&:focus{border:2px solid #fff}&:hover{background-color:#26a69a}&:active{background-color:#00897b}}}#footer{height:30px;width:100%}#discord-link{float:left}#discord-link,#version{background-color:#424242;font-size:18px;height:100%;line-height:30px;padding:0 5px;text-decoration:none}#version{float:right}</style><canvas id=canvas></canvas><p id=connection-status>Loading<div id=main-menu><p id=title>wire<div id=header></div><div id=main><div id=controls class=center><div id=gun-select-container><button class="btn-gun-select selected" data-gun=0 tabindex=-1><img alt=Pistol src=img/icons/pistol.png title=Pistol></button> <button class=btn-gun-select data-gun=1><img alt=SMG src=img/icons/smg.png title=SMG></button> <button class=btn-gun-select data-gun=2><img alt=Shotgun src=img/icons/shotgun.png title=Shotgun></button> <button class=btn-gun-select data-gun=3><img alt=Assault src=img/icons/assault.png title=Assault></button> <button class=btn-gun-select data-gun=4><img alt=Sniper src=img/icons/sniper.png title=Sniper></button> <button class=btn-gun-select data-gun=5><img alt=LMG src=img/icons/lmg.png title=LMG></button></div><button disabled id=btn-spawn>Spawn</button></div></div><div id=footer><a href=https://discord.gg/sabhyHueQf id=discord-link>Discord</a> <a href=changelog.txt id=version title=dev@9f9a4d>0.0.3</a></div></div><script type=module>var a=Object.defineProperty,b={};((b,c)=>{for(var d in c)a(b,d,{get:c[d],enumerable:1})})(b,{arc:()=>B,beginPath:()=>l,clearRect:()=>v,closePath:()=>m,create:()=>h,destroy:()=>i,fill:()=>o,fillRect:()=>x,fillStyle:()=>q,fillText:()=>F,font:()=>C,globalAlpha:()=>s,lineTo:()=>y,lineWidth:()=>r,moveTo:()=>z,rect:()=>A,restore:()=>k,save:()=>j,scale:()=>u,h:()=>g,stroke:()=>n,strokeRect:()=>w,strokeStyle:()=>p,textAlign:()=>D,textBaseline:()=>E,translate:()=>t});var c,d=new Map,e=new TextDecoder,f=0;function g(a){c=new Uint8Array(a.buffer)}function h(a){const b=document.getElementsByTagName("canvas")[a];return b?(f++,d.set(f,b.getContext("2d")),f):0}function i(a){d.delete(a)}function j(a){d.get(a).save()}function k(a){d.get(a).restore()}function l(a){d.get(a).beginPath()}function m(a){d.get(a).closePath()}function n(a){d.get(a).stroke()}function o(a){d.get(a).fill()}function p(a,b,f){d.get(a).strokeStyle=e.decode(c.subarray(b,b+f))}function q(a,b,f){d.get(a).fillStyle=e.decode(c.subarray(b,b+f))}function r(a,b){d.get(a).lineWidth=b}function s(a,b){d.get(a).globalAlpha=b}function t(a,b,c){d.get(a).translate(b,c)}function u(a,b,c){d.get(a).scale(b,c)}function v(a,b,c,e,f){d.get(a).clearRect(b,c,e,f)}function w(a,b,c,e,f){d.get(a).strokeRect(b,c,e,f)}function x(a,b,c,e,f){d.get(a).fillRect(b,c,e,f)}function y(a,b,c){d.get(a).lineTo(b,c)}function z(a,b,c){d.get(a).moveTo(b,c)}function A(a,b,c,e,f){d.get(a).rect(b,c,e,f)}function B(a,b,c,e,f,g){d.get(a).arc(b,c,e,f,g)}function C(a,b,f){d.get(a).font=e.decode(c.subarray(b,b+f))}function D(a,b,f){d.get(a).textAlign=e.decode(c.subarray(b,b+f))}function E(a,b,f){d.get(a).textBaseline=e.decode(c.subarray(b,b+f))}function F(a,b,f,g,h){d.get(a).fillText(e.decode(c.subarray(b,b+f)),g,h)}var G,H=(a,b=document)=>"string"==typeof a?b.querySelector(a):a,I=(a,b=document)=>"string"==typeof a?b.querySelectorAll(a):a,J=(a,b,c)=>H(a).addEventListener(c?b:b.name,c||b),K=(a,b="block")=>H(a).style.display=b,L=a=>H(a).style.display="none",M=new TextEncoder,N=new WebAssembly.Memory({initial:32});function O(){G=new Uint8Array(N.buffer),N.buffer,g(N)}function P(a,b){G.set(M.encode(b),a)}var Q,R,S,T={i:{memory:N,j:O},Math,k:b,console:{log(a,b){},error(a,b){}},l:{send(a,b){Q.send(G.subarray(a,a+b))},m(){Z=1,L(W),L(X),K(V),R=Date.now(),_()},o(){cancelAnimationFrame(S),Z=0,Y.disabled=0,$()},p(){U.select_perk(0)},q(){}}},{instance:{exports:U}}=await WebAssembly.instantiateStreaming(fetch("g.wasm"),T),V=H("canvas"),W=H("#main-menu"),X=H("#connection-status"),Y=(H("#controls"),H("#btn-spawn")),Z=0;function $(){L(V),K(W),K(X)}function _(){const a=Date.now(),b=(a-R)/1e3;U.render(b),R=a,S=requestAnimationFrame(_)}function onResize(){V.width=window.innerWidth,V.height=window.innerHeight,U.set_canvas_size(V.width,V.height)}J(Y,"click",(function(){Q.readyState===WebSocket.OPEN&&(Y.disabled=1,U.spawn(+H(".btn-gun-select.selected").dataset.gun))})),J(document,"keydown",(function({code:a,repeat:b}){!b&&Z&&(P(U.KEY_CODE_BUF,a),U.on_keydown(a.length))})),J(document,"keyup",(function({code:a}){Z&&(P(U.KEY_CODE_BUF,a),U.on_keyup(a.length))})),J(document,"mousedown",(function(){Z&&U.on_mousedown()})),J(document,"mouseup",(function(){Z&&U.on_mouseup()})),J(document,"mousemove",(function({clientX:a,clientY:b}){Z&&U.on_mousemove(a,b)})),J(window,"resize",onResize),I(".btn-gun-select").forEach((a=>{J(a,"click",(()=>{I(".btn-gun-select").forEach((a=>{a.classList.remove("selected"),a.removeAttribute("tabIndex")})),a.classList.add("selected"),a.setAttribute("tabIndex",-1)}))})),O(),U.setup(),onResize(),(Q=new WebSocket("wss://wire-epyi.onrender.com")).binaryType="arraybuffer",J(Q,"open",(function(){X.innerText="Connected",X.style.backgroundColor="#4CAF50",Y.disabled=0})),J(Q,"message",(function({data:a}){"string"!=typeof a&&(G.set(new Uint8Array(a),U.MSG_BUF),U.on_message(a.byteLength))})),J(Q,"error",(function(){})),J(Q,"close",(function({code:a,reason:b}){X.innerText="Disconnected",X.style.backgroundColor="#F44336",Y.disabled=1,Z&&(Z=0,$(),cancelAnimationFrame(S))})),X.innerText="Connecting",X.style.backgroundColor="#2196F3",K(X);</script>